<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Test</title>
		<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">	
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/bootstrap-theme.min.css">
		<script src="js/jquery.min.js"></script>
		<script src="https://socket.io/socket.io.js"></script>
		<style type="text/css">
		/* Stijl voor de antwoordvelden */
		.dropzone {
		    width: 30%;
		    height: 200px;
		    border: 2px dashed #333;
		    margin: 20px;
		    display: inline-block;
		    position: relative;
		    text-align: center;
		    line-height: 200px;
		    font-size: 1.2em;
		    color: #333;
		    -webkit-user-select: none; /* Safari */        
			-moz-user-select: none; /* Firefox */
			-ms-user-select: none; /* IE10+/Edge */
			user-select: none; /* Standard */
		}

		/* Container voor de fiches */
		#chipContainer {
		    position: relative;
		    width: 70px;
		    height: 70px;
		    margin-top: 20px;
		}
		.chip {
		    width: 50px;
		    height: 50px;
		    border-radius: 50%;
		    border-style: dashed;
		    border-color: white;
		    background-color: blue;
		    box-shadow: 4px -4px 8px rgba(0, 0, 0, 0.3);
		    position: absolute;
		    top: 340px; /* Plaats de chip onder de antwoord-divs */
            left: 20px; /* Je kunt deze waarde aanpassen om de chip horizontaal te verplaatsen */
		    display: flex;
		    align-items: center;
		    justify-content: center;
		    font-size: 1.5em;
		    cursor: pointer;
		    color: white;
		    transition: transform 0.1s ease, top 0.1s ease;
		    -webkit-user-select: none; /* Safari */        
			-moz-user-select: none; /* Firefox */
			-ms-user-select: none; /* IE10+/Edge */
			user-select: none; /* Standard */
		}
		</style>
	</head>
<body>
<div id="dropzone1" class="dropzone">Antwoord 1</div>
<div id="dropzone2" class="dropzone">Antwoord 2</div>
<script type="text/javascript">
let isDragging = {};
let offsetX = {};
let offsetY = {};
let fiches1 = {};
let amount = 10;
let onanswer = 0;
let inHand = 0;
let dist = 8;

// Haal de coördinaten van dropzone1 op
const dropzone1Rect = dropzone1.getBoundingClientRect();

function Drag(element, x, y){
	element.style.left = `${x}px`;
	element.style.top = `${y}px`;
	element.style.boxShadow = "8px -8px 8px rgba(0, 0, 0, 0.3)";
}

for (let i = 0; i < amount; i++) {
	isDragging[i] = false;
	// Maak een nieuwe div aan
	const newDiv = document.createElement("div");
	fiches1[i] = newDiv;
	// Stel de class en id in
	newDiv.className = "chip";
	newDiv.id = "draggable3";

	// Voeg optionele inhoud toe
	newDiv.textContent = "1";

	// Voeg de nieuwe div toe aan de body
	document.body.appendChild(newDiv);
	newDiv.style.top = `${newDiv.getBoundingClientRect().top - dist*i}px`;

	function Grab(element, i, e){
		inHand = amount - i;
	    for (j = amount; j >= i; j--){
	   		isDragging[j] = true;
	   	}
	    // Bereken offset, zodat het element volgt vanaf het punt waar je het aanraakt
	    offsetX[i] = e.clientX - element.getBoundingClientRect().left;
	    offsetY[i] = e.clientY - element.getBoundingClientRect().top;
	}

	newDiv.addEventListener("mousedown", function (e) {
	    // Prevent default touch behavior
	    e.preventDefault();
	    Grab(newDiv, i, e);
	});

	newDiv.addEventListener("touchstart", function (e) {
	    // Prevent default touch behavior
	    e.preventDefault();
	    isDragging[i] = true;
	    
	    Grab(newDiv, i, e.touches[0]);
	    // Bereken offset, zodat het element volgt vanaf het punt waar je het aanraakt
	    //offsetX[i] = e.touches[0].clientX - newDiv.getBoundingClientRect().left;
	    //offsetY[i] = e.touches[0].clientY - newDiv.getBoundingClientRect().top;
	});

	document.addEventListener("mousemove", function (e) {
		if (!isDragging[i]) return;
	    e.preventDefault();
	    for (let k = (amount - 1); k >= (amount - inHand); k--){
	    	Drag(fiches1[k], e.pageX - offsetX[i], e.pageY - offsetY[i] + dist*(amount - k) - inHand*dist);
	    }
	});

	newDiv.addEventListener("touchmove", function (e) {
		if (!isDragging[i]) return;
	    e.preventDefault();
	    
	    // Verplaats het element op basis van de touch-coördinaten en offset
	    const touch = e.touches[0];
	    for (let k = (amount - 1); k >= (amount - inHand); k--){
	    	Drag(fiches1[k], touch.clientX - offsetX[i], touch.clientY - offsetY[i] + dist*(amount - k) - inHand*dist);
	    }
	});

}

function Drop(){
	// Haal de coördinaten van het draggable-element op
    const draggableRect = fiches1[amount-inHand].getBoundingClientRect();
    
    // Controleer of draggable binnen dropzone1 valt
    const isOverDropzone1 =
        draggableRect.left < dropzone1Rect.right &&
        draggableRect.right > dropzone1Rect.left &&
        draggableRect.top < dropzone1Rect.bottom &&
        draggableRect.bottom > dropzone1Rect.top;
	for (let j = 0; j < amount; j++) {
		if (isDragging[j] == true){
			isDragging[j] = false;
			fiches1[j].style.boxShadow = "4px -4px 8px rgba(0, 0, 0, 0.3)";

		    if (isOverDropzone1) {
		        fiches1[j].style.left = `20px`;
		        fiches1[j].style.top = `100px`;
		    } else {
		        // Zet de positie terug als het niet boven dropzone1 is
		        fiches1[j].style.left = `20px`;
		        fiches1[j].style.top = `${340 - j*dist}px`;
		    }
    	}
	}
	inHand = 0;
}

document.addEventListener("mouseup", function (e) {
	Drop();
});

document.addEventListener("touchend", function (e) {
	Drop();
});

</script>


</body>
</html>